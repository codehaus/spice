<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    <bean id="repository" class="org.componenthaus.repository.api.RepositoryImpl"/>

    <bean id="fileManager" class="org.componenthaus.util.file.FileManagerImpl"/>

    <bean id="componentFactory" class="org.componenthaus.repository.impl.ComponentFactory"/>

    <bean id="serviceImplementationFactory" class="org.componenthaus.repository.impl.ServiceImplementationFactory"/>

    <bean id="prevayler" class="org.componenthaus.prevayler.PrevaylerBean">
        <property name="prevaylentSystem"><ref bean="repository"/></property>
    </bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
        <property name="basename">
            <value>views</value>
        </property>
    </bean>

    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="/welcome.htm">welcomeController</prop>
                <prop key="/submitComponent.action">submitComponentController</prop>
                <prop key="/listComponents.action">listComponentsController</prop>
                <prop key="/componentDetails.action">showComponentController</prop>
                <prop key="/downloadComponent.action">downloadComponentController</prop>
                <prop key="/showImplementation.action">showImplementationController</prop>
            </props>
        </property>
    </bean>

    <bean id="welcomeController" class="org.componenthaus.usecases.welcomeuser.WelcomeUserController">
    </bean>

    <bean id="submitComponentController" class="org.componenthaus.usecases.submitcomponent.SubmitComponentController">
        <property name="formView">
            <value>submitComponentView</value>
        </property>
        <property name="prevayler"><ref bean="prevayler"/></property>
        <property name="componentFactory"><ref bean="componentFactory"/></property>
        <property name="serviceImplementationFactory"><ref bean="serviceImplementationFactory"/></property>
        <property name="successView"><value>welcomeView</value></property>
    </bean>

    <bean id="listComponentsController" class="org.componenthaus.usecases.listcomponents.ListComponentsController">
        <property name="prevayler"><ref bean="prevayler"/></property>
    </bean>

    <bean id="showImplementationController" class="org.componenthaus.usecases.showimplementation.ShowImplementationController">
        <property name="prevayler"><ref bean="prevayler"/></property>
    </bean>

    <bean id="showComponentController" class="org.componenthaus.usecases.showcomponent.ShowComponentController">
        <property name="prevayler"><ref bean="prevayler"/></property>
    </bean>

    <bean id="downloadComponentController" class="org.componenthaus.usecases.downloadcomponent.DownloadComponentController">
        <property name="prevayler"><ref bean="prevayler"/></property>
        <property name="fileManager"><ref bean="fileManager"/></property>
    </bean>

</beans>
